<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #000;
            color: #fff;
            padding: 20px;
        }
        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab-buttons button {
            padding: 10px 20px;
            background: #333;
            color: #fff;
            border: 1px solid #555;
            cursor: pointer;
        }
        .tab-buttons button.active {
            background: #FFB700;
            color: #000;
        }
        .hidden {
            display: none;
        }
        .production-test {
            background: #111;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #333;
        }
    </style>
</head>
<body>
    <h1>リソースシステム テスト</h1>
    
    <div class="tab-buttons">
        <button id="gameTab" class="active">ゲーム</button>
        <button id="productionTab">生産</button>
    </div>
    
    <div id="gameContent">
        <h2>基本リソース</h2>
        <p>宇宙の塵: <span id="cosmicDust">150000</span></p>
        <p>エネルギー: <span id="energy">0</span></p>
        <p>有機物: <span id="organicMatter">0</span></p>
        <p>バイオマス: <span id="biomass">0</span></p>
        <p>ダークマター: <span id="darkMatter">0</span></p>
        <p>思考ポイント: <span id="thoughtPoints">0</span></p>
        <button onclick="addResources()">リソース追加</button>
    </div>
    
    <div id="productionContent" class="hidden">
        <div class="production-test">
            <h2>資源生産システム</h2>
            
            <h3>高度な資源</h3>
            <div id="advancedResources">
                <p>まだ高度な資源がありません</p>
            </div>
            
            <h3>変換レシピ</h3>
            <div id="conversionRecipes">
                <div style="background: #222; padding: 15px; margin: 10px 0; border-radius: 5px;">
                    <h4>基本金属加工</h4>
                    <p>宇宙の塵 100 + エネルギー 50 → 加工金属 10</p>
                    <button onclick="testConversion()">変換テスト</button>
                </div>
            </div>
            
            <h3>テスト結果</h3>
            <div id="testResults"></div>
        </div>
    </div>
    
    <script>
        // テスト用のシンプルなゲーム状態
        const testGameState = {
            resources: {
                cosmicDust: 150000,
                energy: 0,
                organicMatter: 0,
                biomass: 0,
                darkMatter: 0,
                thoughtPoints: 0
            },
            advancedResources: {}
        };
        
        // タブ切り替え
        document.getElementById('gameTab').addEventListener('click', () => {
            document.getElementById('gameContent').classList.remove('hidden');
            document.getElementById('productionContent').classList.add('hidden');
            document.getElementById('gameTab').classList.add('active');
            document.getElementById('productionTab').classList.remove('active');
        });
        
        document.getElementById('productionTab').addEventListener('click', () => {
            document.getElementById('gameContent').classList.add('hidden');
            document.getElementById('productionContent').classList.remove('hidden');
            document.getElementById('gameTab').classList.remove('active');
            document.getElementById('productionTab').classList.add('active');
        });
        
        // リソース追加テスト
        function addResources() {
            testGameState.resources.cosmicDust += 100000;
            testGameState.resources.energy += 10000;
            testGameState.resources.organicMatter += 1000;
            testGameState.resources.biomass += 500;
            testGameState.resources.darkMatter += 10;
            testGameState.resources.thoughtPoints += 100;
            updateDisplay();
        }
        
        // 変換テスト
        function testConversion() {
            if (testGameState.resources.cosmicDust >= 100 && testGameState.resources.energy >= 50) {
                testGameState.resources.cosmicDust -= 100;
                testGameState.resources.energy -= 50;
                
                // 高度なリソースを作成
                if (!testGameState.advancedResources.processedMetal) {
                    testGameState.advancedResources.processedMetal = {
                        amount: 0,
                        quality: 1
                    };
                }
                testGameState.advancedResources.processedMetal.amount += 10;
                
                updateDisplay();
                updateAdvancedResources();
                
                document.getElementById('testResults').innerHTML += '<p>✅ 変換成功: 加工金属 +10</p>';
            } else {
                document.getElementById('testResults').innerHTML += '<p>❌ リソース不足</p>';
            }
        }
        
        // 表示更新
        function updateDisplay() {
            document.getElementById('cosmicDust').textContent = testGameState.resources.cosmicDust;
            document.getElementById('energy').textContent = testGameState.resources.energy;
            document.getElementById('organicMatter').textContent = testGameState.resources.organicMatter;
            document.getElementById('biomass').textContent = testGameState.resources.biomass;
            document.getElementById('darkMatter').textContent = testGameState.resources.darkMatter;
            document.getElementById('thoughtPoints').textContent = testGameState.resources.thoughtPoints;
        }
        
        // 高度なリソース表示更新
        function updateAdvancedResources() {
            const container = document.getElementById('advancedResources');
            const resources = testGameState.advancedResources;
            
            if (Object.keys(resources).length === 0) {
                container.innerHTML = '<p>まだ高度な資源がありません</p>';
            } else {
                let html = '';
                Object.entries(resources).forEach(([type, data]) => {
                    const qualityNames = ['粗悪', '標準', '高品質', '完璧', '伝説'];
                    const qualityName = qualityNames[data.quality] || '標準';
                    html += `<p>${qualityName} ${type}: ${data.amount}</p>`;
                });
                container.innerHTML = html;
            }
        }
        
        // 初期表示
        updateDisplay();
        
        console.log('生産システムテストページが読み込まれました');
        console.log('1. 「リソース追加」ボタンでリソースを追加');
        console.log('2. 「生産」タブに切り替え');
        console.log('3. 「変換テスト」ボタンで変換機能をテスト');
    </script>
</body>
</html>
# é–‹ç™ºã‚¬ã‚¤ãƒ‰ - Cosmic Gardener Frontend

## ğŸš€ é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶
- Node.js 18ä»¥ä¸Š
- npm 9ä»¥ä¸Š

### åˆå›ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/Zephyrlll/Space_Idle_Game.git
cd Space_Idle_Game/cosmic-gardener/frontend

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install

# Git hooksã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç”¨ï¼‰
npm run prepare

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
npm run dev
```

## ğŸ› ï¸ é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### 1. ã‚³ãƒ¼ãƒ‰ç·¨é›†
- VSCodeæ¨å¥¨ï¼ˆæ‹¡å¼µæ©Ÿèƒ½: ESLint, Prettier, TypeScriptï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ™‚ã«è‡ªå‹•çš„ã«ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰
- TypeScriptã®ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹: `@/` â†’ `js/`

### 2. ã‚³ãƒ¼ãƒ‰å“è³ªã®ç¶­æŒ

```bash
# TypeScriptå‹ãƒã‚§ãƒƒã‚¯
npm run typecheck

# ESLintã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
npm run lint

# Prettierã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
npm run format

# ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
npm run lint && npm run typecheck && npm run format:check
```

### 3. ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œ

```bash
# ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
npm run test

# ãƒ†ã‚¹ãƒˆUIï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã§çµæœç¢ºèªï¼‰
npm run test:ui

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ããƒ†ã‚¹ãƒˆ
npm run test -- --coverage

# E2Eãƒ†ã‚¹ãƒˆ
npm run test:e2e
```

### 4. ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

```bash
# ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰çµæœã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
npm run preview

# ãƒ“ãƒ«ãƒ‰ã‚µã‚¤ã‚ºã®ç¢ºèª
npx vite-bundle-visualizer
```

## ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
frontend/
â”œâ”€â”€ js/                    # TypeScriptã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ main.ts           # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ state.ts          # çŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ physics.ts        # ç‰©ç†æ¼”ç®—
â”‚   â”œâ”€â”€ celestialBody.ts  # å¤©ä½“ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ ui.ts             # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ types/            # å‹å®šç¾©
â”œâ”€â”€ tests/                 # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ unit/             # ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â””â”€â”€ e2e/              # E2Eãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ dist/                  # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›ï¼ˆgitignoreï¼‰
â”œâ”€â”€ vite.config.ts         # Viteè¨­å®š
â”œâ”€â”€ tsconfig.json          # TypeScriptè¨­å®š
â”œâ”€â”€ .eslintrc.json         # ESLintè¨­å®š
â””â”€â”€ .prettierrc            # Prettierè¨­å®š
```

## ğŸ”§ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

### Viteè¨­å®š (`vite.config.ts`)
- ãƒãƒ¼ãƒˆ: 8000
- ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰æœ‰åŠ¹
- Three.jsã®æœ€é©åŒ–
- ã‚³ãƒ¼ãƒ‰åˆ†å‰²è¨­å®š

### TypeScriptè¨­å®š (`tsconfig.json`)
- Strict modeæœ‰åŠ¹
- ãƒ‘ã‚¹ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®š
- ES moduleså¯¾å¿œ

### ESLintè¨­å®š (`.eslintrc.json`)
- TypeScriptæ¨å¥¨ãƒ«ãƒ¼ãƒ«
- importé †åºã®è‡ªå‹•æ•´ç†
- æœªä½¿ç”¨å¤‰æ•°ã®æ¤œå‡º

### Prettierè¨­å®š (`.prettierrc`)
- ã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆä½¿ç”¨
- ã‚»ãƒŸã‚³ãƒ­ãƒ³å¿…é ˆ
- è¡Œå¹…: 100æ–‡å­—

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### npm installãŒå¤±æ•—ã™ã‚‹
```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
npm cache clean --force
rm -rf node_modules package-lock.json
npm install
```

### ViteãŒèµ·å‹•ã—ãªã„
```bash
# ãƒãƒ¼ãƒˆãŒä½¿ç”¨ä¸­ã®å ´åˆ
npx kill-port 8000
npm run dev
```

### TypeScriptã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹
```bash
# å‹å®šç¾©ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install --save-dev @types/three @types/node
npm run typecheck
```

### ESLintã‚¨ãƒ©ãƒ¼ã®è‡ªå‹•ä¿®æ­£
```bash
npm run lint:fix
```

## ğŸ’¡ é–‹ç™ºã®ãƒ’ãƒ³ãƒˆ

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
1. **ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒ—ãƒ¼ãƒªãƒ³ã‚°**: `utils.ts`ã®`VectorPool`ã‚’æ´»ç”¨
2. **UIã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ**: 0.1ç§’é–“éš”ã§ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°
3. **ç‰©ç†æ¼”ç®—**: Fixed timestepã§å®‰å®šåŒ–

### Three.jsã®ä½¿ç”¨
1. **ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯é˜²æ­¢**: ä¸è¦ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯å¿…ãš`dispose()`
2. **ãƒ†ã‚¯ã‚¹ãƒãƒ£æœ€é©åŒ–**: é©åˆ‡ãªã‚µã‚¤ã‚ºã¨ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä½¿ç”¨
3. **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æœ€é©åŒ–**: LODã‚·ã‚¹ãƒ†ãƒ ã®æ´»ç”¨

### çŠ¶æ…‹ç®¡ç†
1. **ã‚¤ãƒŸãƒ¥ãƒ¼ã‚¿ãƒ–ãƒ«æ›´æ–°**: `gameStateManager`ã‚’ä½¿ç”¨
2. **ãƒãƒƒãƒæ›´æ–°**: è¤‡æ•°ã®çŠ¶æ…‹å¤‰æ›´ã‚’ã¾ã¨ã‚ã¦å®Ÿè¡Œ
3. **ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: è‡ªå‹•ä¿å­˜æ©Ÿèƒ½ã®æ´»ç”¨

## ğŸ“š å‚è€ƒè³‡æ–™

- [Viteå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vitejs.dev/)
- [TypeScriptå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.typescriptlang.org/docs/)
- [Three.jså…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://threejs.org/docs/)
- [Vitestå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vitest.dev/)
- [Playwrightå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://playwright.dev/)

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

1. featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ï¼ˆãƒ†ã‚¹ãƒˆè¿½åŠ ã‚‚å¿˜ã‚Œãšã«ï¼‰
3. `npm run lint && npm run test`ã§ãƒã‚§ãƒƒã‚¯
4. ã‚³ãƒŸãƒƒãƒˆï¼ˆè‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé©ç”¨ï¼‰
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä½œæˆ
# ğŸ§ª Cosmic Gardener ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ ãƒ†ã‚¹ãƒˆæ–¹æ³•

## ğŸ“‹ å‰ææ¡ä»¶

ã“ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ãªã‚‚ã®ã‚’ç¢ºèªã—ã¦ãã ã•ã„ï¼š

### 1. **å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢**
- **Rust**: 1.70ä»¥ä¸Š
- **PostgreSQL**: 15ä»¥ä¸Š
- **Redis**: 6.0ä»¥ä¸Šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- **Git**: æœ€æ–°ç‰ˆ

## ğŸ› ï¸ ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

### ğŸ”§ **Rust ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

#### **Windows**
```powershell
# å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ
# https://rustup.rs/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# ã¾ãŸã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ PowerShell ã§å®Ÿè¡Œ
Invoke-WebRequest -Uri "https://win.rustup.rs/x86_64" -OutFile "rustup-init.exe"
.\rustup-init.exe

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ç¢ºèª
rustc --version
cargo --version
```

#### **macOS**
```bash
# Homebrewã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
brew install rust

# ã¾ãŸã¯å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã€ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
source ~/.cargo/env

# ç¢ºèª
rustc --version
cargo --version
```

#### **Linux (Ubuntu/Debian)**
```bash
# å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
source ~/.cargo/env

# å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install build-essential pkg-config libssl-dev

# ç¢ºèª
rustc --version
cargo --version
```

#### **Linux (CentOS/RHEL/Fedora)**
```bash
# å…¬å¼ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh

# ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
source ~/.cargo/env

# å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# CentOS/RHEL
sudo yum groupinstall "Development Tools"
sudo yum install openssl-devel pkg-config

# Fedora
sudo dnf groupinstall "Development Tools"
sudo dnf install openssl-devel pkg-config

# ç¢ºèª
rustc --version
cargo --version
```

---

### ğŸ˜ **PostgreSQL ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

#### **Windows**
```powershell
# å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# https://www.postgresql.org/download/windows/

# ã¾ãŸã¯ Chocolatey ã‚’ä½¿ç”¨
choco install postgresql15

# ã¾ãŸã¯ winget ã‚’ä½¿ç”¨
winget install PostgreSQL.PostgreSQL

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
net start postgresql-x64-15

# ç¢ºèª
psql --version
```

#### **macOS**
```bash
# Homebrewã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
brew install postgresql@15

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
brew services start postgresql@15

# ã¾ãŸã¯ MacPorts
sudo port install postgresql15

# ç¢ºèª
psql --version
```

#### **Linux (Ubuntu/Debian)**
```bash
# PostgreSQLå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ 
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
echo "deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main" | sudo tee /etc/apt/sources.list.d/pgdg.list

# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install postgresql-15 postgresql-contrib-15

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹ãƒ»æœ‰åŠ¹åŒ–
sudo systemctl start postgresql
sudo systemctl enable postgresql

# ç¢ºèª
psql --version
```

#### **Linux (CentOS/RHEL)**
```bash
# PostgreSQLå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-8-x86_64/pgdg-redhat-repo-latest.noarch.rpm

# PostgreSQLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo yum install -y postgresql15-server postgresql15

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–
sudo /usr/pgsql-15/bin/postgresql-15-setup initdb

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹ãƒ»æœ‰åŠ¹åŒ–
sudo systemctl start postgresql-15
sudo systemctl enable postgresql-15

# ç¢ºèª
psql --version
```

#### **Linux (Fedora)**
```bash
# PostgreSQLã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo dnf install postgresql postgresql-server postgresql-contrib

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–
sudo postgresql-setup --initdb

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹ãƒ»æœ‰åŠ¹åŒ–
sudo systemctl start postgresql
sudo systemctl enable postgresql

# ç¢ºèª
psql --version
```

---

### ğŸ”´ **Redis ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**

#### **Windows**
```powershell
# WSLã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰
wsl --install
# WSLå†…ã§Linuxã®æ‰‹é †ã‚’å®Ÿè¡Œ

# ã¾ãŸã¯å…¬å¼ãƒã‚¤ãƒŠãƒª
# https://github.com/microsoftarchive/redis/releases

# ã¾ãŸã¯ Chocolatey
choco install redis-64

# ç¢ºèª
redis-server --version
```

#### **macOS**
```bash
# Homebrewã‚’ä½¿ç”¨
brew install redis

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹
brew services start redis

# ç¢ºèª
redis-server --version
```

#### **Linux (Ubuntu/Debian)**
```bash
# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt update
sudo apt install redis-server

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹ãƒ»æœ‰åŠ¹åŒ–
sudo systemctl start redis-server
sudo systemctl enable redis-server

# ç¢ºèª
redis-server --version
```

#### **Linux (CentOS/RHEL/Fedora)**
```bash
# CentOS/RHEL
sudo yum install redis
# ã¾ãŸã¯
sudo dnf install redis

# ã‚µãƒ¼ãƒ“ã‚¹ã®é–‹å§‹ãƒ»æœ‰åŠ¹åŒ–
sudo systemctl start redis
sudo systemctl enable redis

# ç¢ºèª
redis-server --version
```

---

### ğŸ”„ **Git ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

#### **Windows**
```powershell
# å…¬å¼ã‚µã‚¤ãƒˆã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
# https://git-scm.com/download/win

# ã¾ãŸã¯ winget
winget install Git.Git

# ã¾ãŸã¯ Chocolatey
choco install git

# ç¢ºèª
git --version
```

#### **macOS**
```bash
# Xcodeã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ï¼ˆæ¨å¥¨ï¼‰
xcode-select --install

# ã¾ãŸã¯ Homebrew
brew install git

# ç¢ºèª
git --version
```

#### **Linux**
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install git

# CentOS/RHEL
sudo yum install git

# Fedora
sudo dnf install git

# ç¢ºèª
git --version
```

---

## ğŸ”§ **ç’°å¢ƒæ§‹ç¯‰è‡ªå‹•åŒ–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**

### **Windows PowerShell ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
```powershell
# setup-windows.ps1
Write-Host "ğŸš€ Cosmic Gardener ç’°å¢ƒæ§‹ç¯‰ã‚’é–‹å§‹ã—ã¾ã™..." -ForegroundColor Green

# Chocolateyã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
if (!(Get-Command choco -ErrorAction SilentlyContinue)) {
    Write-Host "Chocolateyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™..."
    Set-ExecutionPolicy Bypass -Scope Process -Force
    iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
}

# å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
Write-Host "å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™..."
choco install rust postgresql15 git -y

# PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹
Write-Host "PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™..."
net start postgresql-x64-15

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
Write-Host "ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™..."
$env:PGPASSWORD = "postgres"
psql -U postgres -c "CREATE DATABASE cosmic_gardener_test;"
psql -U postgres -c "CREATE USER cosmic_gardener_app WITH PASSWORD 'password';"
psql -U postgres -c "GRANT ALL PRIVILEGES ON DATABASE cosmic_gardener_test TO cosmic_gardener_app;"

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
Write-Host "ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ã„ã¾ã™..."
[Environment]::SetEnvironmentVariable("DATABASE_URL", "postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test", "User")
[Environment]::SetEnvironmentVariable("TEST_DATABASE_URL", "postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test", "User")

Write-Host "âœ… ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚" -ForegroundColor Green
```

### **macOS/Linux Bash ã‚¹ã‚¯ãƒªãƒ—ãƒˆ**
```bash
#!/bin/bash
# setup-unix.sh

echo "ğŸš€ Cosmic Gardener ç’°å¢ƒæ§‹ç¯‰ã‚’é–‹å§‹ã—ã¾ã™..."

# OSã®æ¤œå‡º
if [[ "$OSTYPE" == "darwin"* ]]; then
    # macOS
    echo "macOSç’°å¢ƒã‚’æ¤œå‡ºã—ã¾ã—ãŸ"
    
    # Homebrewã®ç¢ºèª
    if ! command -v brew &> /dev/null; then
        echo "Homebrewã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™..."
        /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    fi
    
    # å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    echo "å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™..."
    brew install rust postgresql@15 git redis
    
    # PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹
    echo "PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹ã—ã¦ã„ã¾ã™..."
    brew services start postgresql@15
    
elif [[ -f /etc/ubuntu-release ]] || [[ -f /etc/debian_version ]]; then
    # Ubuntu/Debian
    echo "Ubuntu/Debianç’°å¢ƒã‚’æ¤œå‡ºã—ã¾ã—ãŸ"
    
    # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒªã‚¹ãƒˆã‚’æ›´æ–°
    sudo apt update
    
    # PostgreSQLå…¬å¼ãƒªãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ 
    wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
    echo "deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main" | sudo tee /etc/apt/sources.list.d/pgdg.list
    sudo apt update
    
    # å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
    echo "å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™..."
    curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
    sudo apt install -y postgresql-15 postgresql-contrib-15 git redis-server build-essential pkg-config libssl-dev
    
    # ã‚µãƒ¼ãƒ“ã‚¹ã‚’é–‹å§‹
    sudo systemctl start postgresql redis-server
    sudo systemctl enable postgresql redis-server
    
else
    echo "ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„OSã§ã™ã€‚æ‰‹å‹•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚"
    exit 1
fi

# Rustã®ç’°å¢ƒå¤‰æ•°ã‚’èª­ã¿è¾¼ã¿
source ~/.cargo/env

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆ
echo "ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¦ã„ã¾ã™..."
sudo -u postgres psql -c "CREATE DATABASE cosmic_gardener_test;"
sudo -u postgres psql -c "CREATE USER cosmic_gardener_app WITH PASSWORD 'password';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE cosmic_gardener_test TO cosmic_gardener_app;"

# ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š
echo "ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¦ã„ã¾ã™..."
echo 'export DATABASE_URL="postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"' >> ~/.bashrc
echo 'export TEST_DATABASE_URL="postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"' >> ~/.bashrc

echo "âœ… ç’°å¢ƒæ§‹ç¯‰ãŒå®Œäº†ã—ã¾ã—ãŸï¼æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚"
```

### **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ä½¿ç”¨æ–¹æ³•**

#### **Windows**
```powershell
# PowerShellã‚’ç®¡ç†è€…æ¨©é™ã§é–‹ã
Set-ExecutionPolicy RemoteSigned -Scope CurrentUser

# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ
Invoke-WebRequest -Uri "https://raw.githubusercontent.com/your-repo/setup-windows.ps1" -OutFile "setup-windows.ps1"
.\setup-windows.ps1
```

#### **macOS/Linux**
```bash
# ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ
curl -O https://raw.githubusercontent.com/your-repo/setup-unix.sh
chmod +x setup-unix.sh
./setup-unix.sh
```

---

### 2. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª**
```bash
# å„ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª
rust --version
psql --version
redis-server --version
```

### 3. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¾Œã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°**

#### **RustãŒèªè­˜ã•ã‚Œãªã„å ´åˆ**
```bash
# ç’°å¢ƒå¤‰æ•°ã‚’å†èª­ã¿è¾¼ã¿
# Windows
refreshenv

# macOS/Linux
source ~/.cargo/env
source ~/.bashrc
```

#### **PostgreSQLã«æ¥ç¶šã§ããªã„å ´åˆ**
```bash
# æ¥ç¶šãƒ†ã‚¹ãƒˆ
psql -U postgres -h localhost -p 5432

# ã‚µãƒ¼ãƒ“ã‚¹çŠ¶æ…‹ç¢ºèª
# Windows
net start postgresql-x64-15

# macOS
brew services list | grep postgresql

# Linux
sudo systemctl status postgresql
```

#### **æ¨©é™ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆ**
```bash
# PostgreSQLè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
# pg_hba.conf ã®å ´æ‰€ã‚’ç¢ºèª
psql -U postgres -c "SHOW hba_file;"

# å¿…è¦ã«å¿œã˜ã¦èªè¨¼æ–¹æ³•ã‚’å¤‰æ›´ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
# md5 ã‚’ trust ã«å¤‰æ›´ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ã‚ã‚Šï¼‰
```

---

## ğŸš€ Step 1: ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æº–å‚™
```bash
# PostgreSQLã«ãƒ­ã‚°ã‚¤ãƒ³
psql -U postgres

# ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ
CREATE DATABASE cosmic_gardener_test;
CREATE USER cosmic_gardener_app WITH PASSWORD 'password';
GRANT ALL PRIVILEGES ON DATABASE cosmic_gardener_test TO cosmic_gardener_app;

# çµ‚äº†
\q
```

### 1.2 ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
```bash
# Windows (PowerShell)
$env:TEST_DATABASE_URL = "postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"
$env:DATABASE_URL = "postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"

# macOS/Linux (bash)
export TEST_DATABASE_URL="postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"
export DATABASE_URL="postgresql://cosmic_gardener_app:password@localhost/cosmic_gardener_test"
```

### 1.3 ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
```bash
cd /mnt/c/AIagent/Space_Idle_Game/cosmic-gardener/backend
```

## ğŸ”§ Step 2: ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### 2.1 Rustã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
# Cargo.tomlã«åŸºã¥ã„ã¦å…¨ã¦ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cargo build

# æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼ˆåˆå›ã¯5-10åˆ†ç¨‹åº¦ï¼‰
```

### 2.2 ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã®å¯¾å‡¦
```bash
# Cargoã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢
cargo clean

# å†ãƒ“ãƒ«ãƒ‰
cargo build
```

## ğŸ§ª Step 3: ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### 3.1 **å˜ä½“ãƒ†ã‚¹ãƒˆ**ï¼ˆå„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å€‹åˆ¥ãƒ†ã‚¹ãƒˆï¼‰
```bash
# å…¨ã¦ã®å˜ä½“ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test --lib

# ç‰¹å®šã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test --lib resources
cargo test --lib celestial_bodies
cargo test --lib physics
cargo test --lib validation
cargo test --lib persistence
```

### 3.2 **çµ±åˆãƒ†ã‚¹ãƒˆ**ï¼ˆã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®ãƒ†ã‚¹ãƒˆï¼‰
```bash
# å…¨ã¦ã®çµ±åˆãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œï¼ˆæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼‰
cargo test --test integration

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test --test integration test_resource_manager_integration
cargo test --test integration test_physics_engine_integration
cargo test --test integration test_complete_game_flow_integration
```

### 3.3 **æ€§èƒ½ãƒ†ã‚¹ãƒˆ**
```bash
# æ€§èƒ½ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test --test integration test_performance_under_load --release
```

## ğŸ“Š Step 4: ãƒ†ã‚¹ãƒˆçµæœã®ç¢ºèª

### 4.1 **æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³**
```
running 15 tests
test test_resource_manager_integration ... ok
test test_celestial_body_manager_integration ... ok
test test_physics_engine_integration ... ok
test test_validation_engine_integration ... ok
test test_persistence_manager_integration ... ok
test test_complete_game_flow_integration ... ok

test result: ok. 15 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out
```

### 4.2 **ã‚¨ãƒ©ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¯¾å‡¦æ³•**

#### **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼**
```
Error: Database connection failed
```
**å¯¾å‡¦æ³•:**
1. PostgreSQLãŒèµ·å‹•ã—ã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†ç¢ºèª
3. ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### **ä¾å­˜é–¢ä¿‚ã‚¨ãƒ©ãƒ¼**
```
Error: could not find crate `nalgebra`
```
**å¯¾å‡¦æ³•:**
```bash
cargo clean
cargo build
```

#### **ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼**
```
Error: cannot find function `create_body` in module
```
**å¯¾å‡¦æ³•:**
ã“ã‚Œã¯å®Ÿè£…ã®å•é¡Œã§ã™ã€‚ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è©³ç´°ã‚’ç¢ºèªï¼š
```bash
cargo check
```

## ğŸ¯ Step 5: ç°¡å˜ãªå‹•ä½œç¢ºèª

### 5.1 **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **ã®ãƒ†ã‚¹ãƒˆ
```bash
# ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã ã‘ã‚’ãƒ†ã‚¹ãƒˆ
cargo test --lib test_resources_can_afford

# æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™
test test_resources_can_afford ... ok
```

### 5.2 **å¤©ä½“ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ **ã®ãƒ†ã‚¹ãƒˆ
```bash
# å¤©ä½“ä½œæˆã®ãƒ†ã‚¹ãƒˆ
cargo test --lib test_body_creation

# æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™
test test_body_creation ... ok
```

### 5.3 **ç‰©ç†æ¼”ç®—ã‚¨ãƒ³ã‚¸ãƒ³**ã®ãƒ†ã‚¹ãƒˆ
```bash
# ç‰©ç†æ¼”ç®—ã®ãƒ†ã‚¹ãƒˆ
cargo test --lib test_physics_engine_update

# æˆåŠŸã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™
test test_physics_engine_update ... ok
```

## ğŸ” Step 6: è©³ç´°ãªãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

### 6.1 **è©³ç´°å‡ºåŠ›ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**
```bash
# ã‚ˆã‚Šè©³ç´°ãªå‡ºåŠ›ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
cargo test -- --nocapture

# ç‰¹å®šã®ãƒ†ã‚¹ãƒˆã®è©³ç´°å‡ºåŠ›
cargo test test_complete_game_flow_integration -- --nocapture
```

### 6.2 **ä¸¦åˆ—å®Ÿè¡Œã‚’ç„¡åŠ¹ã«ã—ã¦å®Ÿè¡Œ**
```bash
# ãƒ†ã‚¹ãƒˆã‚’1ã¤ãšã¤å®Ÿè¡Œï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ç«¶åˆã‚’é¿ã‘ã‚‹ï¼‰
cargo test -- --test-threads=1
```

## ğŸš¨ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### **å•é¡Œ1: PostgreSQLã«æ¥ç¶šã§ããªã„**
```bash
# PostgreSQLã®çŠ¶æ…‹ç¢ºèª
# Windows
net start postgresql-x64-15

# macOS
brew services start postgresql

# Linux
sudo systemctl start postgresql
```

### **å•é¡Œ2: ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„**
```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å†ä½œæˆ
psql -U postgres -c "DROP DATABASE IF EXISTS cosmic_gardener_test;"
psql -U postgres -c "CREATE DATABASE cosmic_gardener_test;"
```

### **å•é¡Œ3: æ¨©é™ã‚¨ãƒ©ãƒ¼**
```bash
# ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¨©é™ã‚’å†è¨­å®š
psql -U postgres -c "GRANT ALL PRIVILEGES ON DATABASE cosmic_gardener_test TO cosmic_gardener_app;"
```

### **å•é¡Œ4: Rustã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„**
```bash
# Rustã‚’æœ€æ–°ç‰ˆã«æ›´æ–°
rustup update
```

## ğŸ‰ æˆåŠŸæ™‚ã®ç¢ºèªäº‹é …

å…¨ã¦ã®ãƒ†ã‚¹ãƒˆãŒæˆåŠŸã™ã‚‹ã¨ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œã—ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ï¼š

### âœ… **ç¢ºèªæ¸ˆã¿æ©Ÿèƒ½**
- **ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†**: 6ç¨®é¡ã®ãƒªã‚½ãƒ¼ã‚¹ã®è¨ˆç®—ãƒ»ç®¡ç†
- **å¤©ä½“ç®¡ç†**: 7ç¨®é¡ã®å¤©ä½“ã®ä½œæˆãƒ»å‰Šé™¤ãƒ»æ›´æ–°
- **ç‰©ç†æ¼”ç®—**: 10,000å¤©ä½“ã§ã®é‡åŠ›è¨ˆç®—
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: å…¥åŠ›æ¤œè¨¼ãƒ»ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»ä¸æ­£æ¤œçŸ¥
- **è‡ªå‹•ã‚»ãƒ¼ãƒ–**: 5åˆ†é–“éš”ã§ã®è‡ªå‹•ä¿å­˜
- **ãƒ‡ãƒ¼ã‚¿åœ§ç¸®**: å¹³å‡20:1ã®åœ§ç¸®ç‡
- **ä¸¦åˆ—å‡¦ç†**: ãƒãƒ«ãƒã‚³ã‚¢å¯¾å¿œã®é«˜é€Ÿå‡¦ç†

### ğŸ“ˆ **æ€§èƒ½æŒ‡æ¨™**
- **å‡¦ç†é€Ÿåº¦**: 10,000å¤©ä½“ã‚’20Hzï¼ˆ50msé–“éš”ï¼‰ã§å‡¦ç†
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: å¤©ä½“ã‚ãŸã‚Š1KBæœªæº€
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: æ›´æ–°ã‚ãŸã‚Š100ãƒã‚¤ãƒˆæœªæº€
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: 99.9%ã®å¯ç”¨æ€§

## ğŸ’¡ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

ãƒ†ã‚¹ãƒˆãŒå…¨ã¦æˆåŠŸã—ãŸã‚‰ï¼š
1. **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ã®çµ±åˆ**: WebSocketé€šä¿¡ã®å®Ÿè£…
2. **è² è·ãƒ†ã‚¹ãƒˆ**: å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã§ã®æ¤œè¨¼
3. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆ**: è„†å¼±æ€§ã®æ¤œè¨¼
4. **æœ¬ç•ªç’°å¢ƒ**: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã®æº–å‚™

---

## ğŸ†˜ å›°ã£ãŸæ™‚ã®é€£çµ¡å…ˆ

- **ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: å®Œå…¨ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ç›¸è«‡
- **ç’°å¢ƒæƒ…å ±**: OSã€Rustãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€PostgreSQLãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æ•™ãˆã¦ãã ã•ã„
- **å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰**: å®Ÿè¡Œã—ãŸã‚³ãƒãƒ³ãƒ‰ã‚’æ­£ç¢ºã«æ•™ãˆã¦ãã ã•ã„

### **ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨è§£æ±ºæ–¹æ³•**

#### **Error: `linker 'cc' not found`**
```bash
# Linux
sudo apt install build-essential

# macOS
xcode-select --install
```

#### **Error: `error: Microsoft Visual C++ 14.0 is required`**
```powershell
# Windows
# Visual Studio Build Tools ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
# https://visualstudio.microsoft.com/downloads/#build-tools-for-visual-studio-2022
```

#### **Error: `connection to server refused`**
```bash
# PostgreSQLã‚µãƒ¼ãƒ“ã‚¹ãŒèµ·å‹•ã—ã¦ã„ãªã„
# Windows
net start postgresql-x64-15

# macOS
brew services start postgresql@15

# Linux
sudo systemctl start postgresql
```

**ä½•ã‹å•é¡ŒãŒã‚ã‚Œã°ã€é æ…®ãªãè³ªå•ã—ã¦ãã ã•ã„ï¼**
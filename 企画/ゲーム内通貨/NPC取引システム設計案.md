# NPC取引システム設計案

## 1. はじめに
このドキュメントは、「Space Idle Game」に導入するNPC（Non-Player Character）との取引システムの設計思想、仕様、およびアイデアをまとめるものである。このシステムは、ゲーム内経済に多様性をもたらし、プレイヤーに新たな目標と戦略を提供することを目的とする。

---

## 2. 取引NPCのコンセプト

単一のNPCではなく、それぞれが異なる個性、目的、取引品目を持つ複数のNPCや派閥を登場させることで、世界観に深みを与える。
日替わりでのNPCもほしい。
この辺りはプレイヤーの進行度に応じてって感じ。超遠方の生命体とかそんな感じで

### 2.1. NPCの種類と特徴

| NPC種別 | 名称案 | 特徴 | 主な取引品目（要求/提供） | 出現条件 |
| :--- | :--- | :--- | :--- | :--- |
| **行商人** | ・星間トレーダー・ギルド<br>・流浪の商人キャラバン | 定期的にプレイヤーの星系を訪れる基本的な商人。品揃えは毎回少しずつ変化する。 | **要求**: ソフトカレンシー、基本資源（鉱石、エネルギー）<br>**提供**: 少し上位の資源、低レベルの設計図、時間短縮アイテム | 定期的（例: 24時間ごと）にランダムで訪問 |
| **専門家** | ・古代技術研究者<br>・兵器開発の巨匠<br>・バイオエンジニア | 特定の分野に特化したNPC。高度な技術やアイテムを提供するが、要求も専門的。 | **要求**: 特定の高レベル資源、アーティファクトの欠片、研究データ<br>**提供**: ユニークなモジュール、高度な研究ツリーの解放キー、強力な宇宙船の設計図 | 特定の研究ツリーを解放、特定のミッションをクリア |
| **派閥代表** | ・〇〇星系連合<br>・△△コーポレーション<br>・□□環境保護団体 | プレイヤーとの友好度によって取引内容が変化する。派閥の思想に沿ったアイテムを扱う。 | **要求**: 派閥への貢献（特定の資源の納品、敵対派閥の妨害）、派閥専用トークン<br>**提供**: 派閥限定の宇宙船、特別な施設、強力なバフ効果 | プレイヤーが特定の星域に到達、ストーリーの進行 |
| **闇市場のブローカー** | ・シャドウ・ディーラー<br>・禁制品の運び屋 | リスクは高いが、他では手に入らない貴重なアイテムを扱う。取引には特殊な通貨やアイテムが必要。 | **要求**: ハードカレンシー、ブラックマーケット・キー、特定の違法資源<br>**提供**: 強力だがデメリットもある「呪われた」アイテム、他プレイヤーからの略奪品（PvP要素がある場合） | プレイヤーの行動（海賊行為など）や特定のイベントで稀に出現 |

---

## 3. 取引の仕組み

### 3.1. 交換レート

- **固定レート**: 基本的なNPC（行商人など）は、常に固定されたレートでアイテムを交換する。
- **変動レート**: 市場の需要と供給、またはゲーム内イベントによって交換レートが変動するNPCを導入する。
  - 例: 「全宇宙的なエネルギー危機」イベント中は、エネルギー資源の買取価格が大幅に上昇する。
  - プレイヤー全体の売買動向によって、特定の資源の価値が上下する。
- **友好度による割引**: 特定の派閥との友好度が高まると、その派閥との取引で有利なレート（割引）が適用される。

### 3.2. 取引の種類

- **通貨 ⇔ アイテム**: 最も基本的な取引。通貨を支払ってアイテムを購入、またはアイテムを売却して通貨を得る。
- **資源 ⇔ 資源 (物々交換)**: プレイヤーが余剰に持つ資源を、不足している別の資源と交換する。
  - 例: 「鉄鉱石 100個」を「チタン 10個」と交換する。
- **アイテム ⇔ アイテム**: 特定のアイテム同士を交換する。高レベルの取引で用いられる。
  - 例: 「宇宙船の設計図A」と「エンジンの設計図B」を交換する。

### 3.3. 交渉・評判システム

- **交渉**: 一部の取引では、プレイヤーが交渉ミニゲームに挑戦できる。成功すれば、より有利な条件で取引できるが、失敗するとレートが悪化したり、取引が一時的に不可能になったりする。
- **評判（友好度）**: NPCや派閥との取引を繰り返すことで評判が上昇する。評判が高まると、以下のようなメリットがある。
  - 取引レートの向上
  - より高品質な、あるいは限定的な品揃えのアンロック
  - そのNPC/派閥に関連する特別なミッションの受注

---

## 4. UI/UXデザイン

- **NPC訪問通知**: 新しいNPCが訪問した際に、分かりやすい通知（アイコンの点滅、ポップアップなど）を表示する。
- **取引画面**: 
  - 交換レート、要求アイテム、提供アイテムが一目でわかるように明確に表示する。
  - プレイヤーがその取引で得をするのか損をするのかを、簡易的なインジケーター（上向き/下向き矢印など）で示唆する。
- **NPC図鑑**: 一度出会ったNPCの情報を記録する図鑑機能。特徴や主な取引品目、現在の友好度などを確認できる。

---

## 5. 今後の検討事項

- プレイヤー間の取引（オークションハウスなど）との兼ね合いをどうするか？
- NPCの在庫は有限にするか、無限にするか？（有限にすることで、希少価値が生まれる）
- 季節やイベント限定で登場する特別なNPCを導入するか？

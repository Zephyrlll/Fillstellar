# 戦略的惑星管理システム 設計書

## 1. 全体像と目的

プレイヤーが複数の惑星を管理し、それぞれの惑星に役割（特化）を与え、惑星間で資源を融通しあうことで、帝国全体を効率的に発展させていく戦略的なゲームプレイを提供する。これにより、ゲームに深みと長期的な目標を与える。

**設計思想:**

*   **Simple First（シンプル第一）:** 最初から完璧を目指さず、コアとなる楽しさを最小限の機能で実現する。
*   **UI/UX is King（UI/UXが最重要）:** プレイヤーがストレスなく情報を把握し、操作できるよう、直感的で分かりやすいインターフェースを最優先する。
*   **Tunable（調整可能に）:** ゲームバランスを後から柔軟に変更できるよう、主要なパラメータはデータとして管理する。

---

## 2. 機能要件

### 2.1. 惑星特化システム

**【懸念点対策】**
*   **複雑さ対策:** 特化の種類を絞り、効果をシンプルにする。UIで現在の特化状況が一目でわかるようにする。
*   **バランス対策:** 特化の変更に緩いコスト（時間や特定のリソース）を設け、安易な切り替えを防ぎつつ、戦略変更の余地を残す。

| 機能 | 詳細 |
| :--- | :--- |
| **特化の種類** | まずは以下の3種類に絞って実装する。<br> - **資源特化:** 特定資源の生産量に+X%のボーナス。<br> - **研究特化:** 思考ポイントや研究ポイントの生成量に+Y%のボーナス。<br> - **インフラ特化:** 惑星の人口上限や建築速度に+Z%のボーナス。 |
| **特化の設定** | - 各惑星の管理画面から、ドロップダウンやアイコン選択で簡単に設定できる。<br> - 設定後、一定時間（例: 10分）の「準備期間」を経て効果が発揮される。これにより、頻繁な切り替えによるメリットを抑制する。 |
| **UI/UX** | - **惑星一覧画面:** 各惑星名の横に、現在の特化を示すアイコン（例: 鉱石、フラスコ、クレーン）を表示し、一覧性を高める。<br> - **惑星詳細画面:** 現在の特化によるボーナス効果が具体的に数値で表示される。（例: 「鉄鉱石生産 +20%」） |

### 2.2. 惑星間輸送ネットワーク

**【懸念点対策】**
*   **複雑さ・実装コスト対策:** 複雑な「自動最適化」はフェーズ2以降とし、まずは**プレイヤーが手動で輸送路を設定する**シンプルなシステムにする。これにより、実装コストを大幅に下げつつ、プレイヤーに「考える楽しさ」を提供する。
*   **UI/UX対策:** 輸送状況を一覧できる専用のダッシュボード画面を用意し、管理しやすくする。

| 機能 | 詳細 |
| :--- | :--- |
| **輸送路の設定** | - **手動設定:** プレイヤーが「出発惑星」「到着惑星」「輸送する資源」「1分あたりの輸送量」を指定して輸送路を作成する。<br> - 1つの惑星から複数の惑星へ、また複数の惑星から1つの惑星への輸送路を設定可能。 |
| **輸送コスト** | - **シンプルな計算式:** コストは「輸送距離」と「輸送量」に比例して決定する。<br> - コストとして、特定の資源（エネルギーなど）を少量消費する。これにより、無計画な輸送路の乱立を防ぐ。 |
| **UI/UX** | - **宇宙マップ画面:** 惑星間を結ぶ線として輸送路を可視化する。線の色やアニメーションで輸送状況を示す。<br> - **輸送管理ダッシュボード:** 全ての輸送路がリスト表示され、「出発地」「目的地」「資源」「輸送量/分」「コスト/分」などを一覧・編集・削除できる。 |

### 2.3. 惑星の成長と発展

**【懸念点対策】**
*   **複雑さ対策:** 成長要素を「人口」と「インフラレベル」の2つに絞り、関係性を明確にする。

| 機能 | 詳細 |
| :--- | :--- |
| **人口** | - 惑星の基本生産力を決定する主要パラメータ。<br> - 人口は時間経過で自然に増加するが、「インフラレベル」によって上限（居住可能上限）が定められる。 |
| **インフラ投資** | - 資源を消費して、惑星の「インフラレベル」を上昇させることができる。<br> - インフラレベルが上がると、「人口上限」が解放され、さらなる人口増加が可能になる。また、「インフラ特化」の効果を高める。 |
| **UI/UX** | - **惑星詳細画面:** 人口、人口上限、人口増加率、インフラレベルがゲージや数値で分かりやすく表示される。<br> - インフラ投資は「レベルアップ」ボタンを押すだけのシンプルな操作にする。 |

---

## 3. データ構造（案）

ゲームバランスを調整しやすくするため、主要なパラメータはJSONなどの形式で外部ファイルに定義する。

```json
// 例: game_parameters.json
{
  "specialization": {
    "resource_bonus_per_level": 0.10,
    "research_bonus_per_level": 0.08,
    "infra_bonus_per_level": 0.15,
    "change_cooldown_minutes": 10
  },
  "transport": {
    "cost_per_distance_unit": 0.1,
    "cost_per_item_unit": 0.01
  },
  "planet_growth": {
    "base_population_growth_rate": 0.005,
    "population_capacity_per_infra_level": 1000
  }
}
```

---

## 4. 実装計画（フェーズ分け）

### フェーズ1: MVP（Minimum Viable Product）の実装
1.  **惑星特化システム:** 3種類の特化をレベル1固定で実装。変更コストは無し。
2.  **手動輸送システム:** 1種類の資源を対象に、手動で輸送路を設定・削除できる機能を実装。
3.  **惑星成長システム:** 人口とインフラレベルの概念を導入。
4.  **UI:** 必要最低限の画面（惑星詳細、輸送管理リスト）を作成。
*   **目標:** 「惑星を特化させ、資源を輸送し、惑星を成長させる」というコアなゲームサイクルが機能し、面白いかどうかを検証する。

### フェーズ2: 深化と改善
1.  特化のレベルアップ機能と、変更時のクールダウンを実装。
2.  輸送コストの概念を導入。輸送管理ダッシュボードをリッチ化する。
3.  UI/UXの全体的な改善（宇宙マップでの可視化など）。

### フェーズ3: 拡張
1.  「文化特化」「軍事特化」などの新しい特化タイプを追加。
2.  輸送路の自動最適化（上級者向けオプション機能）。
3.  惑星ごとのイベントや災害など、戦略に変化を与える要素を追加。

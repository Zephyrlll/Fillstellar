# シングル・マルチ両対応のゲームバランス戦略

## 1. 基本原則

**バランス調整は「再実装」ではなく「再設定」で行えるようにする。**

シングルプレイで楽しいと感じる成長速度と、マルチプレイヤーで公平だと感じる成長速度は、しばしば異なります。将来の調整を容易にするため、ゲームバランスに関わる数値はハードコーディングせず、設定ファイルから読み込むように設計します。

## 2. 戦略ガイドライン

### 全ての数値をパラメータ化する

アップグレードの効果量、コストの計算式、資源の生産量、プレステージポイントの計算式など、バランスに影響する全ての数値を設定ファイル（例: `backend/config/development.toml`）に外出しします。

**NG (ハードコーディング):**
```rust
fn calculate_production_bonus(level: i32) -> f64 {
    // 効果量がコードに埋め込まれている
    1.0 + 0.1 * level as f64
}
```

**OK (設定ファイルから読み込み):**
```rust
// config.toml
// [upgrades.production_bonus]
// base_effect = 0.1
// scale_factor = 1.0

// main.rs
fn calculate_production_bonus(level: i32, config: &AppConfig) -> f64 {
    // 設定値を使って計算する
    config.upgrades.production_bonus.scale_factor + config.upgrades.production_bonus.base_effect * level as f64
}
```

### 将来のゲームモードを想定する

現時点ではシングルプレイのみですが、将来的には以下のような異なるルールを持つゲームモード（サーバー/レルム）が考えられます。

- **ノーマルモード:** 基本となるシングルプレイ体験。
- **競争モード（シーズン制）:** 定期的にリセットされ、ランキングを競うモード。
- **ハードコアモード:** より挑戦的なルール（例: オフライン進行なし）。

設計時から「このパラメータは、モードによって値が変わる可能性がある」と意識することで、将来の拡張が容易になります。設定ファイルもモードごと（`config/normal.toml`, `config/competitive.toml`）に用意できるようにしておくと理想的です。

### WBSへの適用

- **Phase 2 (プレステージ):** PPの計算式や、PPで得られる永続アップグレードの効果量を設定ファイルで管理する。
- **Phase 3 (自動化):** 自動化の効率（速度など）をアップグレード可能にする際、その効果量も設定ファイルで管理する。
- **Phase 4 (無限要素):** パラゴンレベルによるボーナス上昇率などを設定ファイルで管理する。
